---
title: çŸ¥ä¹ç”¨æˆ·å±è”½æ’ä»¶
author: Dozer
layout: post
permalink: /2016/08/zhihu-block-chrome-extension.html
categories:
  - äº’è”ç½‘
tags:
  - Chrome
---

### è„‘å­æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œå¸Œæœ›äººäººéƒ½èƒ½æ‹¥æœ‰å®ƒ

çŸ¥ä¹æ˜¯ä¸ªå¾ˆæœ‰æ„æ€çš„åœ°æ–¹ï¼Œè€Œäººä¸äººä¹‹é—´æœ‰ä¸åŒçš„è§‚ç‚¹æ˜¯å¾ˆæ­£å¸¸çš„äº‹æƒ…ã€‚

ä½†æœ‰çš„äººå°±å¾ˆå¥‡æ€ªï¼Œä¸€è¨€ä¸å’Œå°±å¼€å§‹äººèº«æ”»å‡»äº†ã€‚

è¿™ä¸¤å¤©å°±é‡åˆ°ä¸€ä¸ªå¥‡è‘©çš„äººã€‚

<!--more-->
![Zhihu Comment](/uploads/2016/08/zhihu-comment.png)

é—®é¢˜æ˜¯ï¼šé«˜é€Ÿé‡åˆ°ç´§æ€¥æƒ…å†µåº”è¯¥ç´§æ€¥åˆ¹è½¦è¿˜æ˜¯ç´§æ€¥å˜é“ï¼Ÿ

â€œè®©é€Ÿä¸è®©é“â€è¿™ä¸ªåŸåˆ™æ˜¯æµæ·Œç€å¾ˆå¤šè¡€çš„ï¼Œé«˜é€Ÿé‡åˆ°ç´§æ€¥æƒ…å†µè¿›è¡Œç´§æ€¥å˜é“ç®€ç›´æ˜¯æ‰¾æ­»ã€‚

ä½†æœ‰äº›äººçš„è§‚ç‚¹æ˜¯ï¼šå¤§å®¶åº”è¯¥å»å°è¯•äº†è§£è½¦è¾†çš„æé™ï¼Œåªè¦å¤šå¤šè§‚å¯Ÿç´§æ€¥å˜çº¿æ˜¯å®‰å…¨çš„ã€‚

å…·ä½“è°å¯¹è°é”™å…¶å®æœ¬æ¥å°±æ²¡æœ‰ä¸€ä¸ªæœ€ç»ˆçš„ç­”æ¡ˆï¼Œè½¦ä¸åŒï¼Œé©¾é©¶æŠ€æœ¯ä¸åŒï¼Œå¤„ç†çš„æ–¹å¼ä¹Ÿä¼šæœ‰ä¸åŒã€‚

&nbsp;

é‚£å¤§å®¶ç›¸äº’è¾©è®ºä¸€ä¸‹ï¼ŒçœŸåƒæ€»æ˜¯è¶Šè¾©è¶Šæ˜çš„ã€‚ä½†è¿™ä¸ªäººå°±å¥‡è‘©äº†ï¼Œæ‰€æœ‰å’Œä»–ä¸æ„è§ä¸ä¸€è‡´çš„äººéƒ½å˜æˆäº†â€œå‚»å­â€ã€â€œä¸­äºŒå°‘å¹´â€ã€â€œæŠ€æœ¯å·®â€ã€‚

æˆ‘å’Œä»–è¾©åˆ°ä¸€åŠï¼Œæœ€åä»–æŠŠæˆ‘å±è”½äº†ï¼Œè¿˜æŒ¯æŒ¯æœ‰è¯åœ°è¯´åˆ°ï¼šæˆ‘ä¸æƒ³å’Œä½ ä»¬è¿™ç§å–·å­äº‰ä»€ä¹ˆäº†ã€‚

&nbsp;

ğŸ˜‚  æˆ‘ç«Ÿæ— è¨€ä»¥å¯¹ï¼Œæœ€æ— è¯­çš„æ˜¯ï¼Œæˆ‘æœ¬æ¥ä»¥ä¸ºçŸ¥ä¹ä¸åº”è¯¥æ˜¯è¿™æ ·çš„ä¸€ä¸ªåœ°æ–¹ã€‚

æˆ‘å¹³æ—¶ä»æ¥ä¸çœ‹åˆ«çš„ç½‘ç«™ä¸Šçš„æ–°é—»ï¼Œå› ä¸ºä¸‹é¢çš„è¯„è®ºæƒ¨ä¸å¿ç¹ã€‚

ä½†çŸ¥ä¹ä¹Ÿå‡ºç°äº†è¿™æ ·çš„äººï¼Œæ€ä¹ˆåŠï¼Ÿ

äºæ˜¯è¿™ä¸ªæ’ä»¶å‡ºç°äº†ï¼

&nbsp;

### çŸ¥ä¹æœ¬èº«çš„ç¼ºé™·

æˆ‘å¾ˆå–œæ¬¢ V2EX çš„å±è”½åŠŸèƒ½ï¼Œå› ä¸ºåªè¦å±è”½äº†ä¸€ä¸ªäººåï¼Œå°±ä¸ä¼šçœ‹åˆ°ä»»ä½•å’Œä»–ç›¸å…³çš„ä¸œè¥¿äº†ï¼Œçœ¼ä¸è§ä¸ºå‡€ã€‚ä½†çŸ¥ä¹ä¸è¡Œï¼ŒçŸ¥ä¹å±è”½ååªæ˜¯å¯¹æ–¹æ— æ³•å†ç»™ä½ ç•™è¨€ã€‚

ä½†æ˜¯å¯¹æ–¹çš„å›ç­”ã€è¯„è®ºä½ è¿˜æ˜¯ä¼šçœ‹åˆ°ã€‚

å…¶å®ï¼Œè‡ªå·±å†™ä¸ªæ’ä»¶æ¥å®ç°è¿™ä¸ªå…¶å®æ˜¯éå¸¸ç®€å•çš„ä¸€ä»¶äº‹æƒ…ã€‚

&nbsp;

#### æºä»£ç 

    (function () {
        'use strict';

        var main = function () {
            var blockedUserLinks = [];
            var blockedUserNames = [];

            var blockUser = function () {
                $.each(blockedUserLinks, function (index, item) {
                    var links = [item, "http://www.zhihu.com" + item, "http://www.zhihu.com" + item];
                    $.each(links, function (index, link) {
                        $('div.zm-item-answer:has(a.author-link[href="' + link + '"])').remove();
                    });
                });

                $.each(blockedUserNames, function (index, item) {
                    $('div.comment-app-holder div[aria-label="' + item + "çš„è¯„è®º" + '"]').remove();
                });

            };

            // load blocked user
            $.get("/settings/filter").done(function (html) {
                var page = $(html);
                $.each(page.find('.blocked-users a.avatar-link'), function (index, item) {
                    blockedUserLinks.push($(item).attr("href"));
                });

                $.each(page.find('.blocked-users div.body a'), function (index, item) {
                    blockedUserNames.push($(item).text());
                });

                blockUser();
            });


            $(document).ajaxComplete(function (event, request, settings) {
                blockUser();
            });
        };

        var injectedScript = document.createElement('script');
        injectedScript.type = 'text/javascript';
        injectedScript.text = '(' + main + ')("");';
        (document.body || document.head).appendChild(injectedScript);
    })();

è¿™é‡Œä¸»è¦å°±æ˜¯è‡ªåŠ¨è¯»å–ä½ å±è”½çš„ç”¨æˆ·æ¸…å•ï¼Œç„¶ååœ¨é¡µé¢ä¸Šæ‰¾åˆ°è¿™äº›ç”¨æˆ·çš„å›ç­”ã€è¯„è®ºå³å¯ã€‚

&nbsp;

#### ä¸¤ä¸ªå…³é”®ç‚¹

ç¬¬ä¸€ä¸ªéš¾ç‚¹æ˜¯çŸ¥ä¹ä¼šæœ‰å¾ˆå¤š ajax è¯·æ±‚ï¼Œæ‰€ä»¥è„šæœ¬ä¸èƒ½åªåœ¨é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œï¼Œè¿˜éœ€è¦åœ¨æ²¡æ¬¡ ajax è¯·æ±‚åæ‰§è¡Œã€‚çŸ¥ä¹ç”¨çš„æ˜¯ jQyeryï¼Œç›´æ¥ç”¨`$(document).ajaxComplete`å°±å¯ä»¥äº†ã€‚

æ¥ä¸‹æ¥ä¸€ä¸ªéš¾ç‚¹æ˜¯ï¼ŒChrome æ’ä»¶çš„ Javascript é»˜è®¤æ˜¯å’Œé¡µé¢éš”ç¦»çš„ï¼Œåä¸Šé¢çš„æ“ä½œã€‚ç½‘ä¸Šæ‰¾åˆ°çš„è§£å†³æ–¹æ¡ˆä¹Ÿå¾ˆç®€å•ï¼ŒæŠŠ Javascript ä»£ç æ’å…¥åŸé¡µé¢ï¼Œè¿™æ ·å°±å¯ä»¥æ‰§è¡Œäº†ã€‚

&nbsp;

### ä¸‹è½½åœ°å€

æœ€åæ˜¯ä¸‹è½½åœ°å€ï¼š

Chrome Web Store: [https://chrome.google.com/webstore/detail/çŸ¥ä¹ç”¨æˆ·å±è”½æ’ä»¶/ahdjhhjbjfhoohjgaddgpbhkccbfmbpn](https://chrome.google.com/webstore/detail/%E7%9F%A5%E4%B9%8E%E7%94%A8%E6%88%B7%E5%B1%8F%E8%94%BD%E6%8F%92%E4%BB%B6/ahdjhhjbjfhoohjgaddgpbhkccbfmbpn)

Github: [https://github.com/dozer47528/zhihu-block-chrome-extension](https://github.com/dozer47528/zhihu-block-chrome-extension)

å¥½ç”¨çš„è¯å°±æ‰“èµä¸€ä¸‹å‘—ï¼ä¸ºäº†ä¸Šä¼ è¿™ä¸ªæ’ä»¶ï¼Œæˆ‘ä¹Ÿæ˜¯èŠ±äº†5åˆ€çš„ã€‚
